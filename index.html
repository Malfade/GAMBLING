<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Casino Roulette</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            color: white;
            font-family: 'Arial', sans-serif;
        }
        .wheel-container {
            position: relative;
            margin: 40px 0;
        }
        .wheel {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            border: 15px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3), inset 0 0 50px rgba(0, 0, 0, 0.5);
            position: relative;
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            transform-origin: center;
            background: conic-gradient(
                #00b300 0deg 9.73deg,
                #cc0000 9.73deg 19.46deg,
                #000000 19.46deg 29.19deg,
                #cc0000 29.19deg 38.92deg,
                #000000 38.92deg 48.65deg,
                #cc0000 48.65deg 58.38deg,
                #000000 58.38deg 68.11deg,
                #cc0000 68.11deg 77.84deg,
                #000000 77.84deg 87.57deg,
                #cc0000 87.57deg 97.3deg,
                #000000 97.3deg 107.03deg,
                #cc0000 107.03deg 116.76deg,
                #000000 116.76deg 126.49deg,
                #cc0000 126.49deg 136.22deg,
                #000000 136.22deg 145.95deg,
                #cc0000 145.95deg 155.68deg,
                #000000 155.68deg 165.41deg,
                #cc0000 165.41deg 175.14deg,
                #000000 175.14deg 184.87deg,
                #cc0000 184.87deg 194.6deg,
                #000000 194.6deg 204.33deg,
                #cc0000 204.33deg 214.06deg,
                #000000 214.06deg 223.79deg,
                #cc0000 223.79deg 233.52deg,
                #000000 233.52deg 243.25deg,
                #cc0000 243.25deg 252.98deg,
                #000000 252.98deg 262.71deg,
                #cc0000 262.71deg 272.44deg,
                #000000 272.44deg 282.17deg,
                #cc0000 282.17deg 291.9deg,
                #000000 291.9deg 301.63deg,
                #cc0000 301.63deg 311.36deg,
                #000000 311.36deg 321.09deg,
                #cc0000 321.09deg 330.82deg,
                #000000 330.82deg 340.55deg,
                #cc0000 340.55deg 350.28deg,
                #000000 330.82deg 340.55deg
            );
        }
        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: #ffd700;
            border-radius: 50%;
            border: 5px solid #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 2;
        }
        .number {
            position: absolute;
            color: white;
            font-weight: bold;
            font-size: 18px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            width: 30px;
            height: 30px;
            text-align: center;
            line-height: 30px;
            transform-origin: center;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
        }
        .number-container {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
        }
        .pointer {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: #ff0000;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.5));
            z-index: 3;
        }
        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
        }
        .spin-button {
            padding: 15px 40px;
            font-size: 24px;
            font-weight: bold;
            color: #000;
            background: linear-gradient(145deg, #ffd700, #ffed4a);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }
        .spin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(255, 215, 0, 0.4);
        }
        .spin-button:active {
            transform: translateY(1px);
        }
        .spin-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        .bet-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.6);
        }
        .input-field, .bet-select {
            padding: 10px;
            font-size: 16px;
            border: 2px solid #ffd700;
            background-color: transparent;
            color: white;
            border-radius: 5px;
            width: 150px;
            transition: all 0.3s ease;
        }
        .input-field:focus, .bet-select:focus {
            outline: none;
            border-color: #ffed4a;
        }
        #result {
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            min-height: 40px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        .history {
            margin-top: 20px;
            font-size: 18px;
            text-align: center;
        }
        .history-numbers {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .history-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        .red { background-color: #cc0000; }
        .black { background-color: #000000; }
        .green { background-color: #00b300; }
    </style>
</head>
<body>
    <div class="wheel-container">
        <div class="pointer"></div>
        <div class="wheel" id="wheel">
            <div class="number-container" id="number-container"></div>
            <div class="center-circle"></div>
        </div>
    </div>

    <div class="controls">
        <div class="bet-controls">
            <div>
                <label for="betNumber">Choose a number to bet on (0-37):</label>
                <input type="number" id="betNumber" min="0" max="36" class="input-field" required />
            </div>
            <div>
                <label for="betColor">Choose a color to bet on:</label>
                <select id="betColor" class="bet-select">
                    <option value="red">Red</option>
                    <option value="black">Black</option>
                    <option value="green">Green</option>
                </select>
            </div>
        </div>
    </div>

        <button class="spin-button" id="spinButton" onclick="spinWheel()">Spin</button>
        <div id="result"></div>
    </div>

    <div class="history">
        <p>Recent Results:</p>
        <div class="history-numbers" id="history"></div>
    </div>

    <script>
        const spinButton = document.getElementById('spinButton');
        const wheel = document.getElementById("wheel");
        const numberContainer = document.getElementById("number-container");
        const betNumberInput = document.getElementById("betNumber");
        const betColorSelect = document.getElementById("betColor");
        const resultText = document.getElementById("result");
        const historyContainer = document.getElementById("history");
    
        const sections = 37; // 0-36 numbers
        const numbers = [
            { number: 0, color: "green" },
            { number: 31, color: "red" },
            { number: 15, color: "black" },
            { number: 19, color: "red" },
            { number: 4, color: "black" },
            { number: 21, color: "red" },
            { number: 2, color: "black" },
            { number: 25, color: "red" },
            { number: 17, color: "black" },
            { number: 33, color: "red" },
            { number: 6, color: "black" },
            { number: 26, color: "red" },
            { number: 13, color: "black" },
            { number: 35, color: "red" },
            { number: 11, color: "black" },
            { number: 30, color: "red" },
            { number: 8, color: "black" },
            { number: 23, color: "red" },
            { number: 10, color: "black" },
            { number: 5, color: "red" },
            { number: 24, color: "black" },
            { number: 16, color: "red" },
            { number: 32, color: "black" },
            { number: 1, color: "red" },
            { number: 20, color: "black" },
            { number: 14, color: "red" },
            { number: 37, color: "black" },
            { number: 9, color: "red" },
            { number: 22, color: "black" },
            { number: 18, color: "red" },
            { number: 28, color: "black" },
            { number: 7, color: "red" },
            { number: 27, color: "black" },
            { number: 12, color: "red" },
            { number: 34, color: "black" },
            { number: 3, color: "red" },
            { number: 36, color: "black" }, 
        ];
    
        let isSpinning = false; // Флаг для отслеживания состояния вращения
    
        // Обработчик для ввода числа
        betNumberInput.addEventListener('input', function() {
            let value = parseInt(betNumberInput.value);
            if (value > 36) {
                betNumberInput.value = 36;
            } else if (value < 0) {
                betNumberInput.value = 0;
            }
        });
    
        function drawNumbers() {
    const sectionAngle = 360 / sections; // угол между секторами
    const radius = 208; // радиус от центра колеса до чисел (можно настроить)
    const centerX = 200; // X-координата центра
    const centerY = 201; // Y-координата центра

    for (let i = 0; i < sections; i++) {
        const number = document.createElement("div");
        number.classList.add("number");

        // Расчет угла для каждого числа
        const angle = (i * sectionAngle) + (sectionAngle / 2); // Поворот для каждого числа, чтобы оно стояло по центру сектора
        
        // Расположение чисел с учетом центровки по X и Y
        const posX = centerX + radius * Math.cos((angle - 90) * Math.PI / 180); // Расчет X-координаты
        const posY = centerY + radius * Math.sin((angle - 90) * Math.PI / 180); // Расчет Y-координаты

        // Устанавливаем позицию числа
        number.style.position = 'absolute'; // Числа должны быть абсолютно позиционированы относительно контейнера
        number.style.left = `${posX - 15}px`; // Смещаем на 15px для центрирования числа по оси X
        number.style.top = `${posY - 15}px`; // Смещаем на 15px для центрирования числа по оси Y

        // Устанавливаем текст числа и его цвет из массива numbers
        number.textContent = numbers[i].number;
        number.style.color = numbers[i].color;

        numberContainer.appendChild(number);
    }
}

    
        // Функция для вращения колеса
        function spinWheel() {
            if (isSpinning) return; // Если барабан уже вращается, не запускаем снова
    
            isSpinning = true; // Устанавливаем флаг вращения
            spinButton.disabled = true; // Блокируем кнопку
    
            const betNumber = betNumberInput.value;
            const betColor = betColorSelect.value;
            const randomSpin = Math.floor(Math.random() * 360) + 360 * 5;
    
            // Устанавливаем вращение с нужным временем
            wheel.style.transition = "transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)";
            wheel.style.transform = `rotate(${randomSpin}deg)`;
    
            // Определяем выигрышный угол, основываясь на положении колеса
            const winningAngle = randomSpin % 360;
            const sectionAngle = 360 / sections; // угол между секторами
            const winningIndex = Math.floor((360 - winningAngle) / sectionAngle) % sections;
    
            const winningNumber = numbers[winningIndex];
            const winningColor = winningNumber.color;
    
            setTimeout(() => {
                resultText.textContent = `Winner: ${winningNumber.number} (${winningColor})`;
    
                // Проверка ставки
                if (betNumber == winningNumber.number || betColor === winningColor) {
                    resultText.textContent += " - You Win!";
                } else {
                    resultText.textContent += " - You Lose!";
                }
    
                // Обновляем историю
                const historyItem = document.createElement("div");
                historyItem.classList.add("history-number", winningColor);
                historyItem.textContent = winningNumber.number;
                historyContainer.prepend(historyItem);
    
                if (historyContainer.children.length > 5) {
                    historyContainer.removeChild(historyContainer.lastChild);
                }
    
                // Сбрасываем флаг и разблокируем кнопку
                isSpinning = false;
                spinButton.disabled = false;
            }, 4000); // Завершаем через 4 секунды (время вращения)
        }
    
        drawNumbers(); // Нарисовать числа на колесе

    
        drawNumbers();

        function getBetResult() {
            const betNumber = parseInt(document.getElementById('betNumber').value);
            const betColor = document.getElementById('betColor').value;
            const randomIndex = Math.floor(Math.random() * numbers.length);
            const winningNumber = numbers[randomIndex];
            let resultMessage = `Winning Number: ${winningNumber}`;

            if (redNumbers.includes(winningNumber)) {
                resultMessage += ` (Red)`;
            } else if (blackNumbers.includes(winningNumber)) {
                resultMessage += ` (Black)`;
            } else {
                resultMessage += ` (Green)`;
            }

            if (winningNumber === betNumber) {
                resultMessage += `\nYou win the number bet!`;
            }

            if (
                (betColor === "red" && redNumbers.includes(winningNumber)) ||
                (betColor === "black" && blackNumbers.includes(winningNumber)) ||
                (betColor === "green" && greenNumbers.includes(winningNumber))
            ) {
                resultMessage += `\nYou win the color bet!`;
            }

            document.getElementById("result").textContent = resultMessage;

            const history = document.getElementById("history");
            const historyItem = document.createElement("div");
            historyItem.classList.add("history-number", redNumbers.includes(winningNumber) ? "red" : blackNumbers.includes(winningNumber) ? "black" : "green");
            historyItem.textContent = winningNumber;
            history.appendChild(historyItem);
        }

        document.getElementById("spinButton").addEventListener("click", () => {
            document.getElementById("wheel").style.transform = `rotate(${Math.random() * 360 + 3600}deg)`;
            setTimeout(getBetResult, 4000);
        });

        spinButton.addEventListener('click', spinWheel);    // Обработчик для кнопки спина
    </script>
</body>
</html>
